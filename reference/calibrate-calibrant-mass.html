<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Calibrant mass based calibration of chromatgraphic peaks — CalibrantMassParam-class • xcms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Calibrant mass based calibration of chromatgraphic peaks — CalibrantMassParam-class" />
<meta property="og:description" content="Calibrate peaks using mz values of known masses/calibrants.
mz values of identified peaks are adjusted based on peaks that are close
to the provided mz values. See details below for more information.
The isCalibrated function returns TRUE if chromatographic
peaks of the XCMSnExp object x were calibrated and FALSE otherwise." />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xcms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.13.5</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../articles/xcms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/xcms-direct-injection.html">Grouping FTICR-MS data with xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-lcms-ms.html">LC-MS/MS data analysis with xcms</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sneumann/xcms/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Calibrant mass based calibration of chromatgraphic peaks</h1>
    <small class="dont-index">Source: <a href='https://github.com/sneumann/xcms/blob/master/R/DataClasses.R'><code>R/DataClasses.R</code></a>, <a href='https://github.com/sneumann/xcms/blob/master/R/functions-Params.R'><code>R/functions-Params.R</code></a>, <a href='https://github.com/sneumann/xcms/blob/master/R/functions-XCMSnExp.R'><code>R/functions-XCMSnExp.R</code></a>, and 1 more</small>
    <div class="hidden name"><code>calibrate-calibrant-mass.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calibrate peaks using mz values of known masses/calibrants.
mz values of identified peaks are adjusted based on peaks that are close
to the provided mz values. See details below for more information.</p>
<p>The <code>isCalibrated</code> function returns <code>TRUE</code> if chromatographic
peaks of the <a href='XCMSnExp-class.html'>XCMSnExp</a> object <code>x</code> were calibrated and <code>FALSE</code> otherwise.</p>
    </div>

    <pre class="usage"><span class='fu'>CalibrantMassParam</span><span class='op'>(</span>
  mz <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  mzabs <span class='op'>=</span> <span class='fl'>1e-04</span>,
  mzppm <span class='op'>=</span> <span class='fl'>5</span>,
  neighbors <span class='op'>=</span> <span class='fl'>3</span>,
  method <span class='op'>=</span> <span class='st'>"linear"</span>
<span class='op'>)</span>

<span class='fu'>isCalibrated</span><span class='op'>(</span><span class='va'>object</span><span class='op'>)</span>

<span class='co'># S4 method for XCMSnExp</span>
<span class='fu'><a href='calibrate-methods.html'>calibrate</a></span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>param</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>mz</th>
      <td><p>a <code>numeric</code> or <code>list</code> of <code>numeric</code> vectors with reference mz
values. If a <code>numeric</code> vector is provided, this is used for each sample
in the <code>XCMSnExp</code> object. If a <code>list</code> is provided, it's length has to be
equal to the number of samples in the experiment.</p></td>
    </tr>
    <tr>
      <th>mzabs</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> the absolute error/deviation for matching peaks to
calibrants (in Da).</p></td>
    </tr>
    <tr>
      <th>mzppm</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> the relative error for matching peaks to calibrants
in ppm (parts per million).</p></td>
    </tr>
    <tr>
      <th>neighbors</th>
      <td><p><code><a href='https://rdrr.io/r/base/integer.html'>integer(1)</a></code> with the maximal number of peaks within the
permitted distance to the calibrants that are considered. Among these the
mz value of the peak with the largest intensity is used in the
calibration function estimation.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p><code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> defining the method that should be used to
estimate the calibration function. Can be <code>"shift"</code>, <code>"linear"</code> (default)
or <code>"edgeshift"</code>.</p></td>
    </tr>
    <tr>
      <th>object</th>
      <td><p>An <a href='XCMSnExp-class.html'>XCMSnExp</a> object.</p></td>
    </tr>
    <tr>
      <th>param</th>
      <td><p>The <code>CalibrantMassParam</code> object with the calibration settings.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>For <code>CalibrantMassParam</code>: a <code>CalibrantMassParam</code> instance.
For <code>calibrate</code>: an <a href='XCMSnExp-class.html'>XCMSnExp</a> object with chromatographic peaks being
calibrated. <strong>Be aware</strong> that the actual raw mz values are not (yet)
calibrated, but <strong>only</strong> the identified chromatographic peaks.</p>
<p>The <code>CalibrantMassParam</code> function returns an instance of
the <code>CalibrantMassParam</code> class with all settings and properties set.</p>
<p>The <code>calibrate</code> method returns an <a href='XCMSnExp-class.html'>XCMSnExp</a> object with the
chromatographic peaks being calibrated. Note that <strong>only</strong> the detected
peaks are calibrated, but not the individual mz values in each spectrum.</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The method does first identify peaks that are close to the provided
mz values and, given that there difference to the calibrants is smaller
than the user provided cut off (based on arguments <code>mzabs</code> and <code>mzppm</code>),
their mz values are replaced with the provided mz values. The mz values
of all other peaks are either globally shifted (for <code>method = "shift"</code>
or estimated by a linear model through all calibrants.
Peaks are considered close to a calibrant mz if the difference between
the calibrant and its mz is <code>&lt;= mzabs + mz * mzppm /1e6</code>.</p>
<p><strong>Adjustment methods</strong>: adjustment function/factor is estimated using
the difference between calibrant and peak mz values only for peaks
that are close enough to the calibrants. The availabel methods are:</p><ul>
<li><p><code>shift</code>: shifts the m/z of each peak by a global factor which
corresponds to the average difference between peak mz and calibrant mz.</p></li>
<li><p><code>linear</code>: fits a linear model throught the differences between
calibrant and peak mz values and adjusts the mz values of all peaks
using this.</p></li>
<li><p><code>edgeshift</code>: performs same adjustment as <code>linear</code> for peaks that are
within the mz range of the calibrants and shift outside of it.</p></li>
</ul>

<p>For more information, details and examples refer to the
<em>xcms-direct-injection</em> vignette.</p>
    <h2 class="hasAnchor" id="note"><a class="anchor" href="#note"></a>Note</h2>

    <p><code>CalibrantMassParam</code> classes don't have exported getter or setter
methods.</p>
    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Joachim Bargsten, Johannes Rainer</p>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Steffen Neumann.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9000.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


