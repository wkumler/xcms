<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Impute missing values with random numbers based on the row minimum — imputeRowMinRand • xcms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Impute missing values with random numbers based on the row minimum — imputeRowMinRand" />
<meta property="og:description" content="Replace missing values with random numbers.
When using the method = &quot;mean_sd&quot;, random numbers will be generated
from a normal distribution based
on (a fraction of) the row min and a standard deviation estimated from the
linear relationship between row standard deviation and mean of the full data
set. Parameter sd_fraction allows to further reduce the estimated
standard deviation.
When using the method method = &quot;from_to&quot;, random numbers between 2 specific values
will be generated." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xcms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.11.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/xcms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/new_functionality.html">New and modified functionality in xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-direct-injection.html">Grouping FTICR-MS data with xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-lcms-ms.html">LC-MS/MS data analysis with xcms</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sneumann/xcms/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Impute missing values with random numbers based on the row minimum</h1>
    <small class="dont-index">Source: <a href='https://github.com/sneumann/xcms/blob/master/R/functions-imputation.R'><code>R/functions-imputation.R</code></a></small>
    <div class="hidden name"><code>imputeRowMinRand.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Replace missing values with random numbers.
When using the <code>method = "mean_sd"</code>, random numbers will be generated
from a normal distribution based
on (a fraction of) the row min and a standard deviation estimated from the
linear relationship between row standard deviation and mean of the full data
set. Parameter <code>sd_fraction</code> allows to further reduce the estimated
standard deviation.
When using the method <code>method = "from_to"</code>, random numbers between 2 specific values
will be generated.</p>
    </div>

    <pre class="usage"><span class='fu'>imputeRowMinRand</span>(
  <span class='no'>x</span>,
  <span class='kw'>method</span> <span class='kw'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='st'>"mean_sd"</span>, <span class='st'>"from_to"</span>),
  <span class='kw'>min_fraction</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fl'>2</span>,
  <span class='kw'>min_fraction_from</span> <span class='kw'>=</span> <span class='fl'>1</span>/<span class='fl'>1000</span>,
  <span class='kw'>sd_fraction</span> <span class='kw'>=</span> <span class='fl'>1</span>,
  <span class='kw'>abs</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>x</th>
      <td><p><code>matrix</code> with abundances, rows being features/metabolites and
columns samples.</p></td>
    </tr>
    <tr>
      <th>method</th>
      <td><p>method <code><a href='https://rdrr.io/r/base/character.html'>character(1)</a></code> defining the imputation method.
See description for details. Defaults to <code>method = "mean_sd"</code>.</p></td>
    </tr>
    <tr>
      <th>min_fraction</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> with the fraction of the row minimum that
should be used to replace <code>NA</code> values in that row in case that <code>mean_sd</code>
method is specified. When  using <code>from_to</code> method, this value will be the
one used to calculate the maximum value for replace <code>NA</code> values in that row.</p></td>
    </tr>
    <tr>
      <th>min_fraction_from</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> with the fraction of the row minimum
that should be used to calculate the minimum value for replace <code>NA</code> values
in that row. This parameter is used only in case that <code>from_to</code> method is
specified.</p></td>
    </tr>
    <tr>
      <th>sd_fraction</th>
      <td><p><code><a href='https://rdrr.io/r/base/numeric.html'>numeric(1)</a></code> factor to reduce the estimated standard
deviation. This parameter is used only in case that <code>mean_sd</code> method is
specified.</p></td>
    </tr>
    <tr>
      <th>abs</th>
      <td><p><code><a href='https://rdrr.io/r/base/logical.html'>logical(1)</a></code> to force imputed values to be strictly positive.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>For method <strong>mean_sd</strong>, imputed
values are taken from a normal distribution with mean being a
user defined fraction of the row minimum and the standard deviation
estimated for that mean based on the linear relationship between row
standard deviations and row means in the full matrix <code>x</code>.</p>
<p>To largely avoid imputed values being negative or larger than the <em>real</em>
values, the standard deviation for the random number generation is estimated
ignoring the intercept of the linear model estimating the relationship
between standard deviation and mean. If <code>abs = TRUE</code> <code>NA</code> values are
replaced with the absolute value of the random values.</p>
<p>For method <strong>from_to</strong>, imputed values are taken between 2 user defined
fractions of the row minimum.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code>imputeLCMD</code> package for more left censored imputation functions.</p>
<p>Other imputation functions: 
<code><a href='imputeRowMin.html'>imputeRowMin</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>faahKO</span>)
<span class='fu'><a href='https://rdrr.io/r/utils/data.html'>data</a></span>(<span class='st'>"faahko"</span>)

<span class='no'>xset</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='group-methods.html'>group</a></span>(<span class='no'>faahko</span>)</div><div class='output co'>#&gt; <span class='message'>Processing 3195 mz slices ... </span></div><div class='output co'>#&gt; <span class='message'>OK</span></div><div class='input'><span class='no'>mat</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='groupval-methods.html'>groupval</a></span>(<span class='no'>xset</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='st'>"into"</span>)

<span class='co'>## Estimate the relationship between row sd and mean. The standard deviation</span>
<span class='co'>## of the random distribution is estimated on this relationship.</span>
<span class='no'>mns</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/colSums.html'>rowMeans</a></span>(<span class='no'>mat</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='no'>sds</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span>(<span class='no'>mat</span>, <span class='kw'>MARGIN</span> <span class='kw'>=</span> <span class='fl'>1</span>, <span class='no'>sd</span>, <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
<span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>mns</span>, <span class='no'>sds</span>)</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/graphics/abline.html'>abline</a></span>(<span class='fu'><a href='https://rdrr.io/r/stats/lm.html'>lm</a></span>(<span class='no'>sds</span> ~ <span class='no'>mns</span>))</div><div class='img'><img src='imputeRowMinRand-1.png' alt='' width='700' height='433' /></div><div class='input'>
<span class='no'>mat_imp_meansd</span> <span class='kw'>&lt;-</span> <span class='fu'>imputeRowMinRand</span>(<span class='no'>mat</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"mean_sd"</span>)
<span class='no'>mat_imp_fromto</span> <span class='kw'>&lt;-</span> <span class='fu'>imputeRowMinRand</span>(<span class='no'>mat</span>, <span class='kw'>method</span> <span class='kw'>=</span> <span class='st'>"from_to"</span>)

<span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>mat</span>)</div><div class='output co'>#&gt;                 ko15      ko16       ko18      ko19       ko21      ko22
#&gt; 200.1/2926  147887.5  451600.7   65290.38        NA   91635.45  162012.4
#&gt; 205/2791   1778568.9 1567038.1 1482796.38 1039129.8 1223132.35 1072037.7
#&gt; 206/2790    237993.6  269714.0  201393.42  150107.3  176989.65  156797.0
#&gt; 207.1/2719  380873.0  460629.7  351750.14  219288.0  286848.56  235022.6
#&gt; 219.1/2525  235544.9  173623.4         NA        NA  185792.43  174458.8
#&gt; 231/2517          NA        NA  222609.07  286232.1  435094.49        NA
#&gt;                 wt15       wt16       wt18       wt19      wt21       wt22
#&gt; 200.1/2926  175177.1   82619.48         NA   69198.22  153273.5   98144.28
#&gt; 205/2791   1950287.5 1466780.60 1572679.16 1275312.76 1356014.3 1231442.16
#&gt; 206/2790    276541.8  222366.15  211717.71  186850.88  188285.9  172348.76
#&gt; 207.1/2719  417169.6  324892.46  277990.70  220972.35  252874.0  236728.16
#&gt; 219.1/2525  244584.5  161184.05   72029.38         NA  238194.4  173829.95
#&gt; 231/2517          NA         NA         NA  240261.21  201316.2  179437.72</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>mat_imp_meansd</span>)</div><div class='output co'>#&gt;                 ko15       ko16        ko18       ko19       ko21       ko22
#&gt; 200.1/2926  147887.5  451600.71   65290.385   18158.61   91635.45  162012.44
#&gt; 205/2791   1778568.9 1567038.14 1482796.385 1039129.82 1223132.35 1072037.70
#&gt; 206/2790    237993.6  269713.98  201393.415  150107.31  176989.65  156797.04
#&gt; 207.1/2719  380873.0  460629.74  351750.138  219287.97  286848.56  235022.63
#&gt; 219.1/2525  235544.9  173623.38    8192.758   35951.09  185792.43  174458.77
#&gt; 231/2517    122376.6   37911.23  222609.068  286232.15  435094.49   82685.59
#&gt;                  wt15       wt16       wt18       wt19      wt21       wt22
#&gt; 200.1/2926  175177.08   82619.48   35287.02   69198.22  153273.5   98144.28
#&gt; 205/2791   1950287.49 1466780.60 1572679.16 1275312.76 1356014.3 1231442.16
#&gt; 206/2790    276541.85  222366.15  211717.71  186850.88  188285.9  172348.76
#&gt; 207.1/2719  417169.58  324892.46  277990.70  220972.35  252874.0  236728.16
#&gt; 219.1/2525  244584.47  161184.05   72029.38   43109.86  238194.4  173829.95
#&gt; 231/2517     82774.47   81679.47   73973.13  240261.21  201316.2  179437.72</div><div class='input'><span class='fu'><a href='https://rdrr.io/r/utils/head.html'>head</a></span>(<span class='no'>mat_imp_fromto</span>)</div><div class='output co'>#&gt;                  ko15        ko16       ko18        ko19       ko21       ko22
#&gt; 200.1/2926  147887.53  451600.713   65290.38    4186.346   91635.45  162012.44
#&gt; 205/2791   1778568.94 1567038.138 1482796.38 1039129.818 1223132.35 1072037.70
#&gt; 206/2790    237993.62  269713.984  201393.42  150107.310  176989.65  156797.04
#&gt; 207.1/2719  380873.05  460629.738  351750.14  219287.968  286848.56  235022.63
#&gt; 219.1/2525  235544.92  173623.378   21360.51    7304.250  185792.43  174458.77
#&gt; 231/2517     19073.24    4487.634  222609.07  286232.146  435094.49   42618.66
#&gt;                  wt15       wt16       wt18       wt19      wt21       wt22
#&gt; 200.1/2926  175177.08   82619.48   21870.45   69198.22  153273.5   98144.28
#&gt; 205/2791   1950287.49 1466780.60 1572679.16 1275312.76 1356014.3 1231442.16
#&gt; 206/2790    276541.85  222366.15  211717.71  186850.88  188285.9  172348.76
#&gt; 207.1/2719  417169.58  324892.46  277990.70  220972.35  252874.0  236728.16
#&gt; 219.1/2525  244584.47  161184.05   72029.38   15346.00  238194.4  173829.95
#&gt; 231/2517     87238.42    8433.93   18713.60  240261.21  201316.2  179437.72</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffen Neumann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


