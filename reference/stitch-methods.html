<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Correct gaps in data — stitch-methods • xcms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Correct gaps in data — stitch-methods" />
<meta property="og:description" content="Fixes gaps in data due to calibration scans or lock mass. Automatically detects file type
  and calls the relevant method. The mzXML file keeps the data the same length in time but
  overwrites the lock mass scans. The netCDF version adds the scans back into the data thereby
  increasing the length of the data and correcting for the unseen gap." />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">xcms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">3.11.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../articles/xcms.html">Get started</a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/new_functionality.html">New and modified functionality in xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-direct-injection.html">Grouping FTICR-MS data with xcms</a>
    </li>
    <li>
      <a href="../articles/xcms-lcms-ms.html">LC-MS/MS data analysis with xcms</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/sneumann/xcms/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Correct gaps in data</h1>
    
    <div class="hidden name"><code>stitch-methods.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Fixes gaps in data due to calibration scans or lock mass. Automatically detects file type
  and calls the relevant method. The mzXML file keeps the data the same length in time but
  overwrites the lock mass scans. The netCDF version adds the scans back into the data thereby
  increasing the length of the data and correcting for the unseen gap.</p>
    </div>


    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>An <code><a href='xcmsRaw-class.html'>xcmsRaw-class</a></code> object</p></td>
    </tr>
    <tr>
      <th>lockMass</th>
      <td><p>A dataframe of locations of the gaps</p></td>
    </tr>
    <tr>
      <th>freq</th>
      <td><p>The intervals of the lock mass scans</p></td>
    </tr>
    <tr>
      <th>start</th>
      <td><p>The starting lock mass scan location, default is 1</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="methods"><a class="anchor" href="#methods"></a>Methods</h2>

    <p></p><dl>
	<dt>object = "xcmsRaw"</dt><dd><p><code>
		stitch(object, lockMass=numeric())
		</code></p></dd>
	
</dl><p></p><dl>
	<dt>object = "xcmsRaw"</dt><dd><p><code>
	makeacqNum(object, freq=numeric(), start=1)
		</code></p></dd>
	
</dl>


    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p><code>makeacqNum</code> takes locates the gap using the starting lock mass scan and it's intervals. This data frame is then used in
	<code>stitch</code> to correct for the gap caused by the lock mass. Correction works by using scans from either side of the gap to fill it in.</p>
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p><code>stitch</code> A corrected <code>xcmsRaw-class</code> object
	<code>makeacqNum</code> A numeric vector of scan locations corresponding to lock Mass scans</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'>if</span> (<span class='fl'>FALSE</span>) <span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>xcms</span>)
    <span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>faahKO</span>)
    <span class='co'>## These files do not have this problem to correct for but just</span>
    <span class='co'>## for an example</span>
    <span class='no'>cdfpath</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/system.file.html'>system.file</a></span>(<span class='st'>"cdf"</span>, <span class='kw'>package</span> <span class='kw'>=</span> <span class='st'>"faahKO"</span>)
    <span class='no'>cdffiles</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/base/list.files.html'>list.files</a></span>(<span class='no'>cdfpath</span>, <span class='kw'>recursive</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>, <span class='kw'>full.names</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>)
    <span class='no'>xr</span><span class='kw'>&lt;-</span><span class='fu'><a href='xcmsRaw.html'>xcmsRaw</a></span>(<span class='no'>cdffiles</span>[<span class='fl'>1</span>])</div><div class='output co'>#&gt; <span class='message'>Create profile matrix with method 'bin' and step 1 ... </span></div><div class='output co'>#&gt; <span class='message'>OK</span></div><div class='input'>    <span class='no'>xr</span></div><div class='output co'>#&gt; An "xcmsRaw" object with 1278 mass spectra
#&gt; 
#&gt; Time range: 2501.4-4499.8 seconds (41.7-75 minutes)
#&gt; Mass range: 200-600 m/z
#&gt; Intensity range: 70-1373180 
#&gt; 
#&gt; MSn data on  0  mass(es)
#&gt; 	with  0  MSn spectra
#&gt; Profile method: bin 
#&gt; Profile step: 1 m/z (401 grid points from 200 to 600 m/z)
#&gt; 
#&gt; Memory usage: 10.7 MB</div><div class='input'>    <span class='co'>##Lets assume that the lockmass starts at 1 and is every 100 scans</span>
    <span class='no'>lockMass</span><span class='kw'>&lt;-</span><span class='kw pkg'>xcms</span><span class='kw ns'>:::</span><span class='fu'>makeacqNum</span>(<span class='no'>xr</span>, <span class='kw'>freq</span><span class='kw'>=</span><span class='fl'>100</span>, <span class='kw'>start</span><span class='kw'>=</span><span class='fl'>1</span>)
    <span class='co'>## these are equcal</span>
    <span class='no'>lockmass</span><span class='kw'>&lt;-</span><span class='fu'><a href='AutoLockMass-methods.html'>AutoLockMass</a></span>(<span class='no'>xr</span>)</div><div class='output co'>#&gt; <span class='warning'>Warning: </span>
#&gt; <span class='warning'>Lock mass frequency wasn't detected</span></div><div class='input'>    <span class='no'>ob</span><span class='kw'>&lt;-</span><span class='fu'>stitch</span>(<span class='no'>xr</span>, <span class='no'>lockMass</span>)
    <span class='no'>ob</span></div><div class='output co'>#&gt; An "xcmsRaw" object with 1304 mass spectra
#&gt; 
#&gt; Time range: 1.6-2040.7 seconds (0-34 minutes)
#&gt; Mass range: 200-600 m/z
#&gt; Intensity range: 70-1373180 
#&gt; 
#&gt; MSn data on  0  mass(es)
#&gt; 	with  0  MSn spectra
#&gt; Profile method: bin 
#&gt; Profile step: no profile data
#&gt; 
#&gt; Memory usage: 6.96 MB</div><div class='input'>
    <span class='co'>## plot the old data before correction</span>
    <span class='no'>foo</span><span class='kw'>&lt;-</span><span class='fu'><a href='rawEIC-methods.html'>rawEIC</a></span>(<span class='no'>xr</span>, <span class='kw'>m</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>200</span>,<span class='fl'>210</span>), <span class='kw'>scan</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>80</span>,<span class='fl'>140</span>))
    <span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>foo</span>$<span class='no'>scan</span>, <span class='no'>foo</span>$<span class='no'>intensity</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"h"</span>)</div><div class='img'><img src='stitch-methods-1.png' alt='' width='700' height='433' /></div><div class='input'>
    <span class='co'>## plot the new corrected data to see what changed</span>
    <span class='no'>foo</span><span class='kw'>&lt;-</span><span class='fu'><a href='rawEIC-methods.html'>rawEIC</a></span>(<span class='no'>ob</span>, <span class='kw'>m</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>200</span>,<span class='fl'>210</span>), <span class='kw'>scan</span><span class='kw'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span>(<span class='fl'>80</span>,<span class='fl'>140</span>))
    <span class='fu'><a href='https://rdrr.io/r/base/plot.html'>plot</a></span>(<span class='no'>foo</span>$<span class='no'>scan</span>, <span class='no'>foo</span>$<span class='no'>intensity</span>, <span class='kw'>type</span><span class='kw'>=</span><span class='st'>"h"</span>)</div><div class='img'><img src='stitch-methods-2.png' alt='' width='700' height='433' /></div><div class='input'>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Steffen Neumann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.9000.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


